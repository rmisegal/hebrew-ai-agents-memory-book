\hebrewsection{מקהלת הסוכנים: שילוב עם \en{Claude CLI}}

סוכן בודד – חזק ומועיל ככל שיהיה – מגיע למלוא עוצמתו רק כשהוא חלק מתזמורת של סוכנים. לאחר שבפרק~\num{3} בנינו סוכן \en{MCP} מלא עבור \en{Gmail}, כעת מטרתנו היא לשלב אותו בתוך מנגנון אורקסטרציה רחב יותר באמצעות \en{Claude CLI}. פלטפורמה זו משמשת כ"מנצח" המנהל מספר סוכנים מומחים במקביל, בהתבסס על פרוטוקול \en{MCP}. שילוב הסוכן מאפשר להפעילו באמצעות שפה טבעית כחלק מהאינטראקציה עם \en{Claude}, ובכך לשרשר תת-משימות באופן אוטומטי וחלק.

להשלמת האינטגרציה, עלינו לבצע מספר צעדים טכניים:
\begin{enumerate}
  \item \textbf{הגדרת שרת ב\en{-Claude CLI}:} נערוך את קובץ התצורה של \en{Claude CLI} כדי לרשום את שרת ה\en{-MCP} שלנו. למשל, נוסיף במקטע \en{\texttt{mcpServers}} כניסה עבור "\en{\texttt{gmail-extractor}}" המצביעה על הפקודה להפעלת שרת הסוכן (ראו דוגמה בנספח ג).
  \item \textbf{רישום יכולות הסוכן:} ניצור קובץ תיאור לסוכן (למשל \en{\texttt{gmail-extractor.md}}) המפרט את תפקידו, יכולותיו, שם השרת (\en{\texttt{gmail-extractor}}) ופרטי הכלי שהוא מספק (ראו נספח ג למלל המלא).
  \item \textbf{אימות וחיבור:} נפעיל את \en{Claude CLI} ונוודא שהסוכן החדש נטען בהצלחה ברשימת הסוכנים הזמינים (\en{\texttt{claude agents list}} יציג את \en{\texttt{gmail-extractor}}). לאחר מכן נוכל לנסות פקודת בדיקה בשפה טבעית, למשל: \en{\texttt{/agent use gmail-extractor to fetch emails with the label "INBOX" from the last 7 days}}. כעת נצפה ש\en{-Claude} יאתחל את הסוכן, יבצע אימות \en{OAuth} (בפעם הראשונה), יריץ את החיפוש, ולבסוף יחזיר תגובת \en{JSON} המכילה את התוצאות (לדוגמה: \en{\{\texttt{"success": true, "count": 12, ...}\}}).
\end{enumerate}

לאחר השלמת שלבים אלו, הסוכן שלנו משולב באופן מלא במערכת. כעת משתמש קצה יכול לבקש מ\en{-Claude}, כחלק משיחה רגילה, לבצע פעולות המבוססות על הסוכן (כגון "חפש עבורי אימיילים עם תווית X מהחודש האחרון"), ו\en{-Claude} יפנה את הבקשה אל הסוכן המתאים, ימתין לתוצאתו, ואז יסכם למשתמש את המידע שהתקבל.

חשוב להדגיש ש\en{-Claude CLI} תומך בהפעלת סוכנים מרובים בו-זמנית. המשמעות היא שנוכל להוסיף למערכת סוכנים מתמחים נוספים (למשל, סוכן לניתוח נתונים או סוכן לחילוץ מידע מרשתות חברתיות) ולתזמר ביניהם. החיבור דרך פרוטוקול \en{MCP} מאפשר לכל סוכן לפעול בבידוד עם הקשר וכלים משלו, בעוד \en{Claude} משמש כליבה מרכזית המתזמרת את שיתוף הפעולה ביניהם\cite{Anthropic2025}. באופן זה ניתן לבנות "מקהלה" של סוכני \en{AI} העובדים בהרמוניה להשגת מטרות מורכבות במיוחד.

\en{Claude CLI} משמש גם כסביבת ההרצה של \textbf{\en{Skills}} – יחידות מומחיות מודולריות הניתנות לשימוש חוזר. בפרקים \num{14}–\num{15} נעמיק בנושא זה ונראה כיצד \en{Skills} מאפשרים אריזת ידע פרוצדורלי (כיצד לעשות \en{X}) לתוך תיקיות קבצים פשוטות, ניתנות לגרסנות ב\en{-Git} ולשיתוף צוותי. מנגנון זה משלים את פרוטוקול \en{MCP}: בעוד \en{MCP} מספק כלים חיצוניים דינמיים, \en{Skills} מספקים \textbf{מומחיות סטטית ניתנת להרחבה}.

כדי שמערכת הסוכנים תשמור על עקביות ורציפות לאורך הפעלות מרובות, נדרשת מערכת \textbf{זיכרון פרסיסטנטי}. בפרק \num{10} נציג את "ארבעת עמודי הזיכרון" – ארכיטקטורה מבוססת קבצים (\en{PRD.md}, \en{CLAUDE.md}, \en{PLANNING.md}, \en{TASKS.md}) המאפשרת ל\en{-Claude} לזכור החלטות ארכיטקטוניות, כללי קידוד ומצב התקדמות בין סשנים. בהיעדר מנגנון זה, הסוכן סובל מ"אמנזיה קונטקסטואלית" ומתחיל כל שיחה מאפס. השילוב בין התזמור הדינמי של \en{Claude CLI} לבין מערכת הזיכרון המובנית הופך את הסוכנים לשותפים קוגניטיביים אמיתיים, בעלי יכולת למידה והתפתחות לאורך זמן.
